"use strict";(globalThis["webpackChunkbattleship"]=globalThis["webpackChunkbattleship"]||[]).push([[157],{4157:(e,l,n)=>{n.r(l),n.d(l,{default:()=>Te});var t=n(9835),a=n(499),i=n(6970),o=n(1957),u=(n(9665),n(1809));const s=(0,u.Q_)("battleship",(()=>{const e=(0,a.iH)(!0),l=(0,a.qj)({player:1,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),n=(0,a.qj)({player:2,placementConfirmed:!1,autoTurn:!0,grid:[],ships:[]}),t=10,i=[5,4,3,3,2,2,1,1];function o(e){e.grid=[];for(let l=0;l<t;l++){const n=[];for(let e=0;e<t;e++)n.push({coordinate:{R:l,C:e},display:c.BLANK,placement:c.BLANK,ID:0,isHit:!1});e.grid.push(n)}}function u(e){e.ships=i.map(((e,l)=>({len:e,ID:l+1,isSet:!1,isSunk:!1})))}function s(){u(l),u(n),o(l),o(n)}const c={BLANK:0,PLACED:1,MARGIN:2,HIT:3,MISS:4},r={BLANK:"948C15",PLACED:"1F9415",MARGIN:"13468C",HIT:"921313",MISS:"383232"},p=(0,a.iH)(!0),d=(0,a.iH)(999),m=(0,a.iH)(!1),v=(0,a.iH)(!1),g=(0,a.iH)(!0);return{p1Active:e,p1:l,p2:n,gridWidth:t,initGame:s,STATES:c,COLORS:r,manualSelectID:d,manualGoRight:p,gameEnd:m,turnInterval:v,isAttackAbled:g}})),c=s(),r=c.STATES,p=c.gridWidth;let d=c.p1Active?c.p1:c.p2;function m(){c.turnInterval=!c.turnInterval,c.p1Active=!c.p1Active,c.isAttackAbled=!c.isAttackAbled}function v(){c.manualSelectID=999}function g(e,l){d=c.p1Active?c.p1:c.p2;const n=c.manualSelectID,t=c.manualGoRight;if(999===n)return void alert("no ship is selected");if(d.grid[e][l].placement!==r.BLANK)return void alert("invalid placement");const a=d.ships[n-1].len;t&&k(e,l,a)||!t&&C(e,l,a)?(b(e,l,a,t,n),d.ships[n-1].isSet=!0,v()):alert("Not enough room!")}function f(){d=c.p1Active?c.p1:c.p2,d.ships.forEach((e=>{h(e.len,e.ID),e.isSet=!0}))}function h(e,l){const n=S(e),t=n.R,a=n.C;if(1===e)return void b(t,a,e,!0,l);const i=n.right,o=n.down,u=!!i&&(!i||!o||A());b(t,a,e,u,l)}function S(e){let l=w(p),n=w(p),t=d.grid[l][n],a=k(l,n,e),i=C(l,n,e);while(t.placement!==r.BLANK||!a&&!i)l=w(p),n=w(p),t=d.grid[l][n],a=k(l,n,e),i=C(l,n,e);return{R:l,C:n,right:a,down:i}}function w(e){return Math.floor(Math.random()*e)}function A(){return Math.random()<.5}function b(e,l,n,t,a){for(let i=0;i<n;i++)t?(D(e,l+i,a),0===i&&(l>=1&&(_(e,l-1),e>=1&&_(e-1,l-1),e+1<p&&_(e+1,l-1)),l+n<p&&(_(e,l+n),e>=1&&_(e-1,l+n),e+1<p&&_(e+1,l+n))),e>=1&&_(e-1,l+i),e+1<p&&_(e+1,l+i)):(D(e+i,l,a),0===i&&(e>=1&&(_(e-1,l),l>=1&&_(e-1,l-1),l+1<p&&_(e-1,l+1)),e+n<p&&(_(e+n,l),l>=1&&_(e+n,l-1),l+1<p&&_(e+n,l+1))),l>=1&&_(e+i,l-1),l+1<p&&_(e+i,l+1))}function k(e,l,n){for(let t=1;t<n;t++){const n=l+t;if(n>=p)return!1;const a=d.grid[e][n];if(a.placement!==r.BLANK)return!1}return!0}function C(e,l,n){for(let t=1;t<n;t++){const n=e+t;if(n>=p)return!1;const a=d.grid[n][l];if(a.placement!==r.BLANK)return!1}return!0}function D(e,l,n){d.grid[e][l].display=r.PLACED,d.grid[e][l].placement=r.PLACED,d.grid[e][l].ID=n}function _(e,l){d.grid[e][l].display=r.MARGIN,d.grid[e][l].placement=r.MARGIN}function y(){c.p1.placementConfirmed=!1,c.p2.placementConfirmed=!1,c.initGame()}function I(e,l){const n=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(n,{color:"primary","text-color":"secondary"})}var B=n(1639),U=n(1607),K=n(9984),T=n.n(K);const L={},H=(0,B.Z)(L,[["render",I]]),W=H;T()(L,"components",{QBtn:U.Z});const P={__name:"PlacementAuto",setup(e){const l=s(),n=l.STATES,o=l.COLORS,u=(0,a.Vh)(l,"p1Active"),c=u.value?(0,a.BK)(l.p1):(0,a.BK)(l.p2),r=c.grid;function p(e,l){const t=c.grid.value[e][l];return t.placement===n.PLACED?o.HIT:t.placement===n.MARGIN?o.MARGIN:o.BLANK}return(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(r),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,t._)("div",{class:"cell",style:(0,i.j5)({background:"#"+p(l,n)})},null,4)])))),128))])))),128))]))}},E=P,N=E,R=["onClick"],Q={__name:"PlacementManual",setup(e){const l=s(),n=l.STATES,o=l.COLORS,u=(0,a.Vh)(l,"p1Active"),c=u.value?(0,a.BK)(l.p1):(0,a.BK)(l.p2),r=c.grid;function p(e,l){const t=c.grid.value[e][l];return t.placement===n.PLACED?o.HIT:t.placement===n.MARGIN?o.MARGIN:o.BLANK}return(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(r),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,t._)("div",{onClick:e=>(0,a.SU)(g)(l,n),class:"cell",style:(0,i.j5)({background:"#"+p(l,n)})},null,12,R)])))),128))])))),128))]))}},q=Q,G=q,M={class:"bg-info text-secondary"},Z=(0,t._)("p",null,"Press button to auto place all ships.",-1),V=(0,t._)("p",null,"1 x 5-tile ship, 1 x 4-tile ship, 2 x 3-tile ship, 2 x 2-tile ship, 2 x 1-tile ship",-1),x={class:"bg-info text-secondary"},F=(0,t._)("p",null,"Pick the size of ship you want to place",-1),j={__name:"PlacementHeader",setup(e){const l=s(),n=l.STATES,i=(0,a.Vh)(l,"p1Active"),o=i.value?(0,a.BK)(l.p1):(0,a.BK)(l.p2),u=o.grid,c=o.ships,r=(0,a.iH)("auto");(0,t.YP)(r,(e=>{h()}));const p=(0,t.Fl)((()=>l.manualGoRight?"Right":"Down"));function d(){l.manualGoRight=!l.manualGoRight}function m(e){l.manualSelectID=e}const g=(0,t.Fl)((()=>c.value.every((e=>e.isSet))));function h(){u.value.forEach((e=>e.forEach((e=>{e.display=n.BLANK,e.placement=n.BLANK,e.ID=0})))),c.value.forEach((e=>{e.isSet=!1})),v()}function S(){o.placementConfirmed.value=!0,i.value=!i.value,v()}return(e,l)=>{const n=(0,t.up)("q-tab"),i=(0,t.up)("q-tabs"),o=(0,t.up)("q-tab-panel"),u=(0,t.up)("q-tab-panels"),s=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),"active-color":"bg-negative",class:"bg-1imary text-secondary",dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{name:"auto",label:"Auto"}),(0,t.Wm)(n,{name:"manual",label:"Manual"})])),_:1},8,["modelValue"]),(0,t.Wm)(u,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),class:"bg-info"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{name:"auto"},{default:(0,t.w5)((()=>[(0,t._)("div",M,[Z,V,(0,t.Wm)(W,{onClick:(0,a.SU)(f),label:"Auto Place",disabled:(0,a.SU)(g)},null,8,["onClick","disabled"])])])),_:1}),(0,t.Wm)(o,{name:"manual"},{default:(0,t.w5)((()=>[(0,t._)("div",x,[F,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(c),(e=>((0,t.wg)(),(0,t.j4)(W,{key:e.ID,onClick:l=>m(e.ID),label:e.len,disabled:e.isSet,class:"buttonRow"},null,8,["onClick","label","disabled"])))),128)),(0,t._)("p",null,[(0,t.Uk)(" Click to rotate: "),(0,t.Wm)(W,{onClick:d,label:(0,a.SU)(p),class:"buttonRow"},null,8,["label"])])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t._)("div",null,[(0,t.Wm)(W,{onClick:h,label:"Clear Placement"}),(0,t.Wm)(W,{disabled:!(0,a.SU)(g),onClick:S,label:"Confirm Placement"},null,8,["disabled"])]),"auto"===r.value?((0,t.wg)(),(0,t.j4)(N,{key:0})):((0,t.wg)(),(0,t.j4)(G,{key:1}))])}}};var Y=n(4458),O=n(2447),z=n(5519),J=n(9800),X=n(4106);const $=j,ee=$;T()(j,"components",{QCard:Y.Z,QTabs:O.Z,QTab:z.Z,QTabPanels:J.Z,QTabPanel:X.Z,QBtn:U.Z});const le={__name:"ProgressQBtn",props:{shipState:Boolean,shipLength:Number},setup(e){const l=e,n=(0,a.Vh)(l,"shipState"),o=(0,t.Fl)((()=>n.value?"secondary":"primary")),u=(0,t.Fl)((()=>n.value?"warning":"secondary"));return(l,n)=>{const s=(0,t.up)("q-tooltip"),c=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)(c,{"text-color":(0,a.SU)(u),color:(0,a.SU)(o)},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{anchor:"top middle",self:"top middle",offset:[30,30]},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.shipLength)+" tile",1)])),_:1})])),_:1},8,["text-color","color"])}}};var ne=n(7048);const te=le,ae=te;T()(le,"components",{QBtn:U.Z,QTooltip:ne.Z});const ie={key:0,style:{margin:"3% 0% 0% 0%"}},oe=(0,t._)("p",null,"Click to toggle end turn method: ",-1),ue={__name:"AttackHeader",props:{p1:Boolean},setup(e){const l=e,n=(0,a.Vh)(l,"p1"),o=s(),u=!0===n.value?(0,a.BK)(o.p1):(0,a.BK)(o.p2),c=u.ships,r=(0,a.Vh)(o,"p1Active"),p=(0,t.Fl)((()=>n.value===r.value)),d=(0,t.Fl)((()=>p.value?"Your Remaining Fleet":"Enemy Destroying Progress")),v=(0,t.Fl)((()=>u.autoTurn.value?"Auto":"Manual")),g=(0,t.Fl)((()=>!u.autoTurn.value));function f(){u.autoTurn.value=!u.autoTurn.value}return(e,l)=>{const n=(0,t.up)("q-card-section"),o=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(o,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t._)("p",null,(0,i.zw)((0,a.SU)(d)),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(c),(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.ID,class:"inline"},[(0,t.Wm)(ae,{label:e.ID,shipState:e.isSunk,shipLength:e.len},null,8,["label","shipState","shipLength"])])))),128)),(0,a.SU)(p)?((0,t.wg)(),(0,t.iD)("div",ie,[oe,(0,t.Wm)(W,{label:(0,a.SU)(v),onClick:f,style:{margin:"0% 1% 0% 0%"}},null,8,["label"]),(0,a.SU)(g)?((0,t.wg)(),(0,t.j4)(W,{key:0,label:"end turn",onClick:(0,a.SU)(m)},null,8,["onClick"])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])),_:1})])),_:1})])}}};var se=n(3190);const ce=ue,re=ce;T()(ue,"components",{QCard:Y.Z,QCardSection:se.Z,QBtn:U.Z});const pe=["onClick"],de={__name:"AttackPanel",props:{p1:Boolean},setup(e){const l=e,n=s(),o=n.STATES,u=n.COLORS,c=(0,a.Vh)(n,"p1Active"),r=(0,a.Vh)(l,"p1"),p=(0,t.Fl)((()=>r.value===c.value)),d=r.value?(0,a.BK)(n.p1):(0,a.BK)(n.p2),v=d.grid,g=d.ships;function f(e,l){const n=v.value[e][l];return p.value?n.placement===o.PLACED?n.isHit?u.HIT:u.PLACED:n.isHit?u.MISS:u.BLANK:n.isHit?n.placement===o.PLACED?u.HIT:u.MISS:u.BLANK}const h=(0,a.Vh)(n,"isAttackAbled");function S(e,l){const t=v.value[e][l];if(!h.value||t.isHit)return;if(h.value=!h.value,t.isHit=!0,t.placement===o.PLACED&&w(t.ID)){g.value[t.ID-1].isSunk=!0;const e=g.value.every((e=>e.isSunk));if(e)return void(n.gameEnd=!n.gameEnd)}const i=r.value?(0,a.BK)(n.p2):(0,a.BK)(n.p1);!p.value&&i.autoTurn.value&&setTimeout((()=>{m()}),1500)}function w(e){const l=v.value.flat().filter((l=>l.ID===e));return l.every((e=>e.isHit))}return(e,l)=>((0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,a.SU)(v),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"inline",key:n},[(0,a.SU)(p)?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"cell",style:(0,i.j5)({background:"#"+f(l,n)})},null,4)):((0,t.wg)(),(0,t.iD)("div",{key:1,onClick:e=>S(l,n),class:"cell",style:(0,i.j5)({background:"#"+f(l,n)})},null,12,pe))])))),128))])))),128))]))}},me=de,ve=me,ge={class:"GameEndModal"},fe=(0,t._)("h1",null," Game End!",-1),he=(0,t._)("div",null,[(0,t._)("h1",null,"Battleships")],-1),Se={key:0,class:"row"},we=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 1 please choose fleet placement")],-1),Ae={key:1,class:"row"},be=(0,t._)("div",{class:"panels col"},[(0,t._)("h2",null,"Player 2 please choose fleet placement")],-1),ke={key:2},Ce={class:"row"},De={class:"panels col"},_e={class:"panels col"},ye={__name:"BattleshipsGame",setup(e){const l=s();l.initGame();const n=!0,u=(0,t.Fl)((()=>l.p1Active?"Player 1":"Player 2"));return(e,s)=>{const c=(0,t.up)("q-card-section"),r=(0,t.up)("q-btn"),p=(0,t.up)("q-card-actions"),d=(0,t.up)("q-card"),m=(0,t.up)("q-dialog"),v=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",ge,[(0,t.Wm)(m,{modelValue:(0,a.SU)(l).gameEnd,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,a.SU)(l).gameEnd=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"bg-info text-secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(u))+" won!",1),fe])),_:1}),(0,t.Wm)(p,{align:"center"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(r,{label:"start new",onClick:(0,a.SU)(y),outline:""},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),he,(0,t.wy)((0,t._)("div",null,[(0,t._)("h1",null,(0,i.zw)((0,a.SU)(u))+" ready?",1),(0,t.Wm)(W,{label:"next turn",onClick:s[1]||(s[1]=e=>(0,a.SU)(l).turnInterval=!(0,a.SU)(l).turnInterval)})],512),[[o.F8,(0,a.SU)(l).turnInterval]]),(0,t.wy)((0,t._)("div",null,[(0,a.SU)(l).p1.placementConfirmed?(0,a.SU)(l).p2.placementConfirmed?((0,t.wg)(),(0,t.iD)("div",ke,[(0,t._)("h2",null,(0,i.zw)((0,a.SU)(u))+"'s turn",1),(0,t._)("div",Ce,[(0,t._)("div",De,[(0,t.Wm)(re,{p1:n}),(0,t.Wm)(ve,{p1:n})]),(0,t._)("div",_e,[(0,t.Wm)(re,{p1:!n},null,8,["p1"]),(0,t.Wm)(ve,{p1:!n},null,8,["p1"])])])])):((0,t.wg)(),(0,t.iD)("div",Ae,[be,(0,t.Wm)(ee,{class:"panels col"})])):((0,t.wg)(),(0,t.iD)("div",Se,[(0,t.Wm)(ee,{class:"panels col"}),we]))],512),[[o.F8,!(0,a.SU)(l).turnInterval]])])}}};var Ie=n(3997),Be=n(1821),Ue=n(2146);const Ke=ye,Te=Ke;T()(ye,"components",{QDialog:Ie.Z,QCard:Y.Z,QCardSection:se.Z,QCardActions:Be.Z,QBtn:U.Z}),T()(ye,"directives",{ClosePopup:Ue.Z})}}]);